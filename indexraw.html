<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Digital Marketing ROI Dashboard</title>
<style>
  body {
    font-family: "Segoe UI", Roboto, sans-serif;
    margin: 20px;
    background: #f8f9fb;
    color: #333;
  }
  h1 {
    text-align: center;
    margin-bottom: 0.5em;
  }
  .control-panel {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 16px;
  }
  .control-panel label {
    font-weight: bold;
  }
  input[type=number] {
    padding: 4px 6px;
    border: 1px solid #bbb;
    border-radius: 4px;
  }
  button {
    display: block;
    margin: 18px auto;
    padding: 10px 22px;
    background: #0078d7;
    color: white;
    border: none;
    border-radius: 4px;
    font-size: 15px;
    cursor: pointer;
    transition: background 0.2s;
  }
  button:hover {
    background: #005ea8;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    background: white;
  }
  th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: right;
  }
  th {
    text-align: center;
  }
  td input {
    width: 85px;
    text-align: right;
  }
  th.blue { background-color: #cfe5ff; }
  th.green { background-color: #d3f7dc; }
  .totals { background: #e0e0e0; font-weight: bold; }

  #insights {
    margin-top: 20px;
    padding: 12px;
    background: #f2f5f7;
    border-radius: 6px;
    font-size: 15px;
    line-height: 1.5em;
  }
  #insights h2 {
    margin: 0 0 5px;
    font-size: 18px;
    color: #222;
  }
  #insights p {
    margin: 4px 0 0;
    color: #555;
  }
</style>
</head>

<body>
<h1>Digital Marketing ROI Dashboard</h1>

<div class="control-panel">
  <label for="productPrice">üí∞ Product Revenue ($ per purchase):</label>
  <input type="number" id="productPrice" value="396" step="1" />
</div>

<table id="dashboard">
  <thead>
    <tr>
      <th>Platform</th>
      <th>Budget ($)</th>
      <th>Impressions</th>
      <th>Clicks</th>
      <th class="blue">Conv. Rate (%)</th>
      <th class="blue">CPM ($)</th>
      <th class="blue">CTR (%)</th>
      <th class="green">Purchases</th>
      <th class="green">Revenue ($)</th>
      <th class="green">Profit ($)</th>
      <th class="green">ROI (√ó)</th>
    </tr>
  </thead>
  <tbody id="dataBody">
    <tr>
      <td style="text-align:left;">Google Demand Gen</td>
      <td><input type="number" value="6000" class="budget" /></td>
      <td><input type="number" value="500000" class="impr" /></td>
      <td><input type="number" value="20000" class="clicks" /></td>
      <td><input type="number" value="20" class="conv" /></td>
      <td class="cpm">‚Äì</td>
      <td class="ctr">‚Äì</td>
      <td class="purchases">‚Äì</td>
      <td class="revenue">‚Äì</td>
      <td class="profit">‚Äì</td>
      <td class="roi">‚Äì</td>
    </tr>
    <tr>
      <td style="text-align:left;">YouTube</td>
      <td><input type="number" value="6000" class="budget" /></td>
      <td><input type="number" value="800000" class="impr" /></td>
      <td><input type="number" value="24000" class="clicks" /></td>
      <td><input type="number" value="18" class="conv" /></td>
      <td class="cpm">‚Äì</td>
      <td class="ctr">‚Äì</td>
      <td class="purchases">‚Äì</td>
      <td class="revenue">‚Äì</td>
      <td class="profit">‚Äì</td>
      <td class="roi">‚Äì</td>
    </tr>
    <tr>
      <td style="text-align:left;">Facebook</td>
      <td><input type="number" value="6000" class="budget" /></td>
      <td><input type="number" value="700000" class="impr" /></td>
      <td><input type="number" value="35000" class="clicks" /></td>
      <td><input type="number" value="22" class="conv" /></td>
      <td class="cpm">‚Äì</td>
      <td class="ctr">‚Äì</td>
      <td class="purchases">‚Äì</td>
      <td class="revenue">‚Äì</td>
      <td class="profit">‚Äì</td>
      <td class="roi">‚Äì</td>
    </tr>
    <tr>
      <td style="text-align:left;">Google Shopping Ads</td>
      <td><input type="number" value="6000" class="budget" /></td>
      <td><input type="number" value="550000" class="impr" /></td>
      <td><input type="number" value="26000" class="clicks" /></td>
      <td><input type="number" value="25" class="conv" /></td>
      <td class="cpm">‚Äì</td>
      <td class="ctr">‚Äì</td>
      <td class="purchases">‚Äì</td>
      <td class="revenue">‚Äì</td>
      <td class="profit">‚Äì</td>
      <td class="roi">‚Äì</td>
    </tr>
  </tbody>
  <tfoot>
    <tr class="totals">
      <td style="text-align:right;">Total:</td>
      <td id="totalBudget">‚Äì</td>
      <td id="totalImpr">‚Äì</td>
      <td id="totalClicks">‚Äì</td>
      <td id="avgConv">‚Äì</td>
      <td id="avgCPM">‚Äì</td>
      <td id="avgCTR">‚Äì</td>
      <td id="totalPurchases">‚Äì</td>
      <td id="totalRevenue">‚Äì</td>
      <td id="totalProfit">‚Äì</td>
      <td id="totalROI">‚Äì</td>
    </tr>
  </tfoot>
</table>

<button id="calcBtn">Confirm & Calculate</button>

<div id="insights">
  <h2>Insights</h2>
  <p>Click <strong>Confirm & Calculate</strong> to see automatic insights.</p>
</div>

<script>
function format(n, digits=0) {
  return Number(n).toLocaleString(undefined, {maximumFractionDigits: digits});
}
function money(n) {
  return "$" + Number(n).toLocaleString(undefined, {maximumFractionDigits: 0});
}
function roiFmt(n) {
  return isFinite(n) ? n.toFixed(2) : "‚Äì";
}

function calculateAndShow() {
  const PRICE = parseFloat(document.getElementById("productPrice").value) || 0;
  const rows = document.querySelectorAll("#dataBody tr");

  let totalBudget = 0, totalImpr = 0, totalClicks = 0, totalPurch = 0, totalRev = 0, totalProfit = 0;
  let summary = [];

  rows.forEach(row => {
    const name = row.cells[0].textContent.trim();
    const budget = parseFloat(row.querySelector(".budget").value) || 0;
    const impressions = parseFloat(row.querySelector(".impr").value) || 0;
    const clicks = parseFloat(row.querySelector(".clicks").value) || 0;
    const convRate = (parseFloat(row.querySelector(".conv").value) || 0) / 100;

    const cpm = impressions > 0 ? (budget / impressions) * 1000 : 0;
    const ctr = impressions > 0 ? (clicks / impressions) * 100 : 0;
    const purchases = clicks * convRate;
    const revenue = purchases * PRICE;
    const profit = revenue - budget;
    const roi = profit / budget;

    row.querySelector(".cpm").textContent = format(cpm, 1);
    row.querySelector(".ctr").textContent = format(ctr, 2);
    row.querySelector(".purchases").textContent = format(purchases, 0);
    row.querySelector(".revenue").textContent = money(revenue);
    row.querySelector(".profit").textContent = money(profit);
    row.querySelector(".roi").textContent = roiFmt(roi);

    summary.push({name, roi, purchases, cpm});

    totalBudget += budget;
    totalImpr += impressions;
    totalClicks += clicks;
    totalPurch += purchases;
    totalRev += revenue;
    totalProfit += profit;
  });

  // totals
  const avgCPM = totalImpr > 0 ? (totalBudget / totalImpr) * 1000 : 0;
  const avgCTR = totalImpr > 0 ? (totalClicks / totalImpr) * 100 : 0;
  const avgConv = totalClicks > 0 ? (totalPurch / totalClicks) * 100 : 0;
  const totalROI = totalBudget > 0 ? (totalProfit / totalBudget) : 0;

  document.getElementById("totalBudget").textContent = money(totalBudget);
  document.getElementById("totalImpr").textContent = format(totalImpr);
  document.getElementById("totalClicks").textContent = format(totalClicks);
  document.getElementById("avgCPM").textContent = format(avgCPM,1);
  document.getElementById("avgCTR").textContent = format(avgCTR,2);
  document.getElementById("avgConv").textContent = format(avgConv,2);
  document.getElementById("totalPurchases").textContent = format(totalPurch);
  document.getElementById("totalRevenue").textContent = money(totalRev);
  document.getElementById("totalProfit").textContent = money(totalProfit);
  document.getElementById("totalROI").textContent = roiFmt(totalROI);

  // insights
  let insightsHTML = "<h2>Insights</h2>";
  if (summary.length > 0) {
    const bestROI = summary.reduce((a,b)=> a.roi > b.roi ? a : b);
    const mostPurch = summary.reduce((a,b)=> a.purchases > b.purchases ? a : b);
    const lowestCPM = summary.reduce((a,b)=> a.cpm < b.cpm ? a : b);
    insightsHTML += `
      <p>üìä <strong>${bestROI.name}</strong> has the highest ROI at <strong>${roiFmt(bestROI.roi)}√ó</strong>.</p>
      <p>üõí <strong>${mostPurch.name}</strong> generates the most purchases (${format(mostPurch.purchases)}).</p>
      <p>üíµ <strong>${lowestCPM.name}</strong> achieves the lowest CPM at $${format(lowestCPM.cpm,1)}.</p>
      <p>‚öôÔ∏è Overall campaign ROI: <strong>${roiFmt(totalROI)}√ó</strong> across all platforms.</p>
    `;
  } else {
    insightsHTML += "<p>Click <strong>Confirm & Calculate</strong> to see automatic insights.</p>";
  }
  document.getElementById("insights").innerHTML = insightsHTML;
}

document.getElementById("calcBtn").addEventListener("click", calculateAndShow);
</script>
</body>
</html>